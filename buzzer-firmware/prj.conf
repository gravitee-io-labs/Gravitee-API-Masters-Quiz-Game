# Zephyr Project Configuration for Quiz Buzzer

# Enable Bluetooth
CONFIG_BT=y
CONFIG_BT_PERIPHERAL=y

# Use Nordic SoftDevice Controller (required for Nice!Nano with S140)
CONFIG_BT_LL_SOFTDEVICE=y

# BLE Settings
CONFIG_BT_GATT_AUTO_SEC_REQ=n
CONFIG_BT_PRIVACY=n
CONFIG_BT_MAX_CONN=1
CONFIG_BT_MAX_PAIRED=1

# Connection parameters for low latency
CONFIG_BT_PERIPHERAL_PREF_MIN_INT=8
CONFIG_BT_PERIPHERAL_PREF_MAX_INT=12
CONFIG_BT_PERIPHERAL_PREF_LATENCY=0
CONFIG_BT_PERIPHERAL_PREF_TIMEOUT=400

# Battery service (BLE standard battery reporting)
CONFIG_BT_BAS=y

# GPIO
CONFIG_GPIO=y

# ==================== POWER MANAGEMENT (Battery Efficiency) ====================

# Enable DC/DC regulator for much better power efficiency
# Note: On nRF52840, DCDC is enabled via board config or devicetree
# The promicro_nrf52840 board should have this enabled by default

# Enable system power management
CONFIG_PM=y

# Low power BLE settings
CONFIG_BT_CONN_TX_MAX=3

# ==================== ADC for Battery Monitoring ====================

# Enable ADC driver
CONFIG_ADC=y
CONFIG_ADC_NRFX_SAADC=y
CONFIG_ADC_ASYNC=n

# System
CONFIG_SYSTEM_WORKQUEUE_STACK_SIZE=2048
CONFIG_MAIN_STACK_SIZE=2048

# Logging (minimal - only errors and warnings)
CONFIG_LOG=y
CONFIG_LOG_DEFAULT_LEVEL=2
CONFIG_PRINTK=y
CONFIG_CONSOLE=y
CONFIG_UART_CONSOLE=y
CONFIG_EARLY_CONSOLE=y

# Bluetooth logging - warnings only (disable debug)
CONFIG_BT_LOG_LEVEL_WRN=y

# Build output - Generate UF2 for bootloader flashing
CONFIG_BUILD_OUTPUT_UF2=y

# Enable dynamic Bluetooth device name (required for bt_set_name to work)
CONFIG_BT_DEVICE_NAME_DYNAMIC=y
CONFIG_BT_DEVICE_NAME_MAX=30
CONFIG_BT_DEVICE_NAME="Gravitee Quiz Buzzer"
