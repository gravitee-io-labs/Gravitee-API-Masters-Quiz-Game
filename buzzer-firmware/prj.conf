# Zephyr Project Configuration for Quiz Buzzer

# Enable Bluetooth
CONFIG_BT=y
CONFIG_BT_PERIPHERAL=y

# Use Nordic SoftDevice Controller (required for Nice!Nano with S140)
CONFIG_BT_LL_SOFTDEVICE=y

# BLE Settings
CONFIG_BT_GATT_AUTO_SEC_REQ=n
CONFIG_BT_PRIVACY=n
CONFIG_BT_MAX_CONN=1
CONFIG_BT_MAX_PAIRED=1

# Connection parameters for low latency
CONFIG_BT_PERIPHERAL_PREF_MIN_INT=8
CONFIG_BT_PERIPHERAL_PREF_MAX_INT=12
CONFIG_BT_PERIPHERAL_PREF_LATENCY=0
CONFIG_BT_PERIPHERAL_PREF_TIMEOUT=400

# Enable GATT services (DIS removed in SDK v3.1+, implement manually if needed)
# CONFIG_BT_GATT_DIS=y
# CONFIG_BT_DIS_STR_MAX=20
# CONFIG_BT_DIS_MODEL="NRF52840-Buzzer"
# CONFIG_BT_DIS_MANUF="Gravitee"

# Battery service
CONFIG_BT_BAS=y

# GPIO
CONFIG_GPIO=y

# Power Management (PM_POLICY_APP removed, using default policy)
# CONFIG_PM=y
# CONFIG_PM_DEVICE=y
# CONFIG_PM_POLICY_APP=y

# Low Power Settings (BT_CTLR_LOW_LAT requires different config in v3.1+)
# CONFIG_BT_CTLR_LOW_LAT=y
CONFIG_BT_CONN_TX_MAX=3

# System
CONFIG_SYSTEM_WORKQUEUE_STACK_SIZE=2048
CONFIG_MAIN_STACK_SIZE=2048

# Logging (enable for debugging bootloader issues)
CONFIG_LOG=y
CONFIG_LOG_DEFAULT_LEVEL=3
CONFIG_PRINTK=y
CONFIG_CONSOLE=y
CONFIG_UART_CONSOLE=y
CONFIG_EARLY_CONSOLE=y

# Bluetooth debug
CONFIG_BT_LOG_LEVEL_DBG=y

# Build output - Generate UF2 for bootloader flashing
CONFIG_BUILD_OUTPUT_UF2=y

# Enable dynamic Bluetooth device name (required for bt_set_name to work)
CONFIG_BT_DEVICE_NAME_DYNAMIC=y
CONFIG_BT_DEVICE_NAME_MAX=30
CONFIG_BT_DEVICE_NAME="Gravitee Quiz Buzzer"
